@using Newtonsoft.Json
@using Nubetico.Frontend.Components.Core.Dialogs
@using Nubetico.Frontend.Components.Shared
@using Nubetico.Frontend.Services.Core
@using Nubetico.Shared.Dto.Core
@using Nubetico.Shared.Dto.ProyectosConstruccion;
@using Nubetico.Shared.Static.Core

@inherits NbBaseComponent

@inject GlobalBreakpointService breakpointService
@inject IStringLocalizer<SharedResources> Localizer

<RadzenPanel>
    <HeaderTemplate>
        <RadzenText TextStyle="TextStyle.H6" class="rz-display-flex rz-align-items-center rz-m-0">
            <RadzenIcon Icon="@("\uf0d6")" IconColor="@Colors.Primary" class="rz-me-2 fa-light" />
            <b>Compras</b>
        </RadzenText>
    </HeaderTemplate>
    <ChildContent>
        <RadzenCard class="rz-mt-4">
            <RadzenDataGrid @ref="GridCompras"
                            IsLoading=@IsLoading
                            Culture="@System.Globalization.CultureInfo.CurrentCulture"
                            Count="@Count"
                            Data="@ListaCompras"
                            LoadData="@LoadDataAsync"
                            AllowSorting="true"
                            AllowFiltering="false"
                            AllowPaging="true"
                            PageSize="@this.RowsPerPage"
                            PagerHorizontalAlign="HorizontalAlign.Center"
                            ShowPagingSummary="true"
                            ColumnWidth="200px"
                            SelectionMode="DataGridSelectionMode.Single"
                            TItem="ComprasDto"
                            RowDoubleClick="DataGridRowDoubleClick"
                            @bind-Value=@ComprasSeleccionadas>
                <Columns>
                    <RadzenDataGridColumn Property="Fecha" Title="Fecha" TextAlign="TextAlign.Center" Visible="true" />
                    <RadzenDataGridColumn Property="Proveedor" Title="Proveedor" TextAlign="TextAlign.Left" />
                    <RadzenDataGridColumn Property="Importe" Title="Importe" TextAlign="TextAlign.Right" />
                </Columns>
            </RadzenDataGrid>
        </RadzenCard>
    </ChildContent>
</RadzenPanel>

